{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": "container",
    "height": 300,
    "background": "rgba(255, 255, 255, 0)",
    "title": {
        "text": "Unemployment",
        "anchor": "start",
        "dx": 27,
        "fontSize": 14,
        "fontWeight": "normal",
        "subtitle": [
            "By municipality",
            "Source: 2022 South African Census"
        ],
        "subtitleFontSize": 12,
        "subtitleFontWeight": 300
    },
    "data": {
        "url": "https://raw.githubusercontent.com/fletchjeff/ZA-Census-Data-Explorer/main/assets/za-local.topojson",
        "format": {
            "type": "topojson",
            "feature": "layer1"
        }
    },
    "config": {"font": "Roboto", "mark": {"line": {"interpolate": "linear"}}, "view": {"stroke": "transparent"}, "range": {"category": ["#179fdb", "#e6224b", "#f4c245", "#122b39", "#eb5c2e", "#36b7b4"], "diverging": ["#E6224B", "#E54753", "#C9C9C9", "#179FDB", "#122B39"], "heatmap": ["#C9C9C9", "#179FDB", "#0063AF", "#122B39"], "ordinal": ["#00A767", "#36B7B4", "#179FDB", "#0063AF", "#243B5A"]}, "axisX": {"labelColor": "#122b39", "tickColor": "#122b39", "domainColor": "#122b39", "domainOpacity": 0.5, "gridOpacity": 0, "labelFont": "Roboto", "labelAngle": 0, "labelAlign": "center", "labelFontSize": 11, "labelPadding": 5, "tickCount": 10, "tickSize": 0, "title": ""}, "axisY": {"labelColor": "#122b39", "labelFont": "Roboto", "tickColor": "#122b39", "domainColor": "#122b39", "gridColor": "#122b39", "gridDash": [1, 5], "gridOpacity": 0.5, "labelPadding": 5, "labelFontSize": 11, "domainOpacity": 0.5, "tickSize": 0, "title": null, "titleAlign": "left", "titleAngle": 0, "titleBaseline": "bottom", "titleColor": "#122b39", "titleOpacity": 0.9, "titleX": 0, "titleY": -7}},
    "projection": {
        "type": "mercator"
    },
    "transform": [
        {
            "lookup": "properties.CAT_B",
            "from": {
                "data": {
                    "url": "https://raw.githubusercontent.com/OpenUpSA/OpenUp-data-viz/main/src/data/muni-unemployment-education.json"
                },
                "key": "GEO_CODE",
                "fields": [
                    "name",
                    "total_allpopu_unemployment"
                ]
            }
        }
    ],
    "mark": {
        "type": "geoshape",
        "stroke": "lightgray",
        "strokeWidth": 0.1
    },
    "encoding": {
        "color": {
            "field": "total_allpopu_unemployment",
            "type": "quantitative",
            "scale": {
                "scheme": "viridis",
                "reverse": true
            },
            "legend": {
                "direction": "horizontal",
                "format": "%",
                "gradientLength": 200,
                "legendX": 25,
                "legendY": 0,
                "titleFontWeight": "normal",
                "orient": "none",
                "title": [""]
            }
        },
        "tooltip": [
            {
                "field": "name",
                "type": "nominal",
                "title": "Name"
            },
            {
                "field": "total_allpopu_unemployment",
                "type": "quantitative",
                "format": ".1%",
                "title": "Unemployment rate"
            }
        ]
    }
}